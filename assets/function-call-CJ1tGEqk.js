import{E as B,G as T,w as C,o as z,H as M,b as a,A as b,I as N,P as L,J as k,K as v,L as j,M as p,N as U,O as H,Q as V,v as w,R as q,x as A,y as D,r as E,z as G,S as J}from"./index-CqF_l6GU.js";let d=0;function K(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[Q,l]=B("toast"),R=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],_={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:v,iconSize:v,duration:j(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:p,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:p,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:v};var F=T({name:Q,props:_,emits:["update:show"],setup(e,{emit:s,slots:o}){let u,i=!1;const c=()=>{const n=e.show&&e.forbidClick;i!==n&&(i=n,K(i))},r=n=>s("update:show",n),g=()=>{e.closeOnClick&&r(!1)},f=()=>clearTimeout(u),m=()=>{const{icon:n,type:t,iconSize:h,iconPrefix:P,loadingType:I}=e;if(n||t==="success"||t==="fail")return a(U,{name:n||t,size:h,class:l("icon"),classPrefix:P},null);if(t==="loading")return a(H,{class:l("loading"),size:h,type:I},null)},x=()=>{const{type:n,message:t}=e;if(o.message)return a("div",{class:l("text")},[o.message()]);if(V(t)&&t!=="")return n==="html"?a("div",{key:0,class:l("text"),innerHTML:String(t)},null):a("div",{class:l("text")},[t])};return C(()=>[e.show,e.forbidClick],c),C(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(u=setTimeout(()=>{r(!1)},e.duration))}),z(c),M(c),()=>a(L,b({class:[l([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:g,onClosed:f,"onUpdate:show":r},N(e,R)),{default:()=>[m(),x()]})}});const W={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let y=[],X=!1,O=w({},W);const Y=new Map;function S(e){return q(e)?e:{message:e}}function Z(){const{instance:e,unmount:s}=D({setup(){const o=E(""),{open:u,state:i,close:c,toggle:r}=G(),g=()=>{},f=()=>a(F,b(i,{onClosed:g,"onUpdate:show":r}),null);return C(o,m=>{i.message=m}),J().render=f,{open:u,close:c,message:o}}});return e}function $(){if(!y.length||X){const e=Z();y.push(e)}return y[y.length-1]}function ee(e={}){if(!A)return{};const s=$(),o=S(e);return s.open(w({},O,Y.get(o.type||O.type),o)),s}const ne=e=>s=>ee(w({type:e},S(s))),se=ne("success");export{se as a,F as s};
