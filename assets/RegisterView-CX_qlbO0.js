import{q as h,d as S,a as C,r as g,c as B,b as o,f as n,e as c,i as b,F as L,g as l,h as M,u as j}from"./index-CqF_l6GU.js";import{s as N,a as U}from"./function-call-CJ1tGEqk.js";h(N);const F="/yrs/assets/register-29e-SEWQ.png",I=S("registerStore",{state:()=>({response:null,error:null,errorMessage:null,errors:[]}),getters:{getResponse:t=>t.response,getError:t=>t.error,getErrorMessage:t=>t.errorMessage,getErrors:t=>t.errors},actions:{async store(t,v,s){var m,d,u,a;try{let r=await C.post("user-portal/register",{name:t,email:v,password:s});this.response=r.data??null,this.error=null,this.errorMessage=null,this.errors=[]}catch(r){this.response=null,this.error=r,this.errorMessage=((d=(m=r==null?void 0:r.response)==null?void 0:m.data)==null?void 0:d.message)??null,this.errors=((a=(u=r==null?void 0:r.response)==null?void 0:u.data)==null?void 0:a.errors)??null}}}}),T={class:"p-3"},q={class:"bg-white rounded-lg"},A={class:"my-4"},O={class:"text-center text-sm"},W={__name:"RegisterView",setup(t){const v=j(),s=I(),m=g(""),d=g(""),u=g(""),a=g({name:"",email:"",password:""}),r=g(!1),E=()=>history.back(),y=async _=>{var e,f,i,w;r.value=!0,a.value={name:"",email:"",password:""},await s.store(_.name,_.email,_.password),s.getErrorMessage?s.getErrors&&(a.value={name:s.getErrors.name?s.getErrors.name.join(", "):"",email:s.getErrors.email?s.getErrors.email.join(", "):"",password:s.getErrors.password?s.getErrors.password.join(", "):""}):(e=s.getResponse)!=null&&e.data.is_verified?(ls.set("__access-token",(f=s.getResponse)==null?void 0:f.data.access_token),U((i=s.getResponse)==null?void 0:i.message),v.push("profile")):(ls.set("__otp-token",(w=s.getResponse)==null?void 0:w.data.otp_token),v.push("two-step-verification")),r.value=!1};return(_,e)=>{const f=l("van-nav-bar"),i=l("van-field"),w=l("van-cell-group"),x=l("van-button"),V=l("van-form"),k=l("van-divider"),R=l("RouterLink");return M(),B(L,null,[o(f,{title:"Register",fixed:!0,"left-text":"","left-arrow":"",onClickLeft:E}),e[8]||(e[8]=n("div",{class:"pt-[46px]"},null,-1)),n("div",T,[o(V,{onSubmit:y},{default:c(()=>[n("div",q,[e[3]||(e[3]=n("div",{class:"flex justify-center items-center py-3"},[n("img",{src:F,alt:"",class:"w-5/12"})],-1)),o(w,{inset:"",class:"mb-3 mx-0"},{default:c(()=>[o(i,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=p=>m.value=p),name:"name",label:"Name",placeholder:"Enter your name","error-message":a.value.name},null,8,["modelValue","error-message"]),o(i,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=p=>d.value=p),name:"email",label:"Email",placeholder:"Enter your email","error-message":a.value.email},null,8,["modelValue","error-message"]),o(i,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=p=>u.value=p),type:"password",name:"password",label:"Password",placeholder:"Enter your password","error-message":a.value.password},null,8,["modelValue","error-message"])]),_:1})]),n("div",A,[o(x,{round:"",block:"",type:"primary","native-type":"submit",color:"#1CBC9B",loading:r.value},{default:c(()=>e[4]||(e[4]=[b(" Confirm ")])),_:1},8,["loading"])])]),_:1}),o(k,{class:"border-theme"},{default:c(()=>e[5]||(e[5]=[b("Or")])),_:1}),n("p",O,[e[7]||(e[7]=b(" Already registered? ")),o(R,{to:"/login",class:"text-theme"},{default:c(()=>e[6]||(e[6]=[b("Login")])),_:1})])])],64)}}};export{W as default};
