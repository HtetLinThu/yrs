import{_ as b}from"./station-BqDwrWZh.js";import{d as P,a as j,r as u,o as G,c as y,b as n,e as s,F as V,g as i,h as f,f as e,t as a,i as k,l as J,m as C,u as Q,k as q,n as H,p as K}from"./index-CqF_l6GU.js";import{r as W}from"./route-CaxCCS0A.js";const X=P("routeDetailStore",{state:()=>({response:null,error:null,errorMessage:null,errors:[]}),getters:{getResponse:r=>r.response,getError:r=>r.error,getErrorMessage:r=>r.errorMessage,getErrors:r=>r.errors},actions:{async get(r,o=null,p=null){var d,m,_,x;try{let l=await j.get(`route/${r}?origin_station_slug=${o}&destination_station_slug=${p}`);this.response=l.data??null,this.error=null,this.errorMessage=null,this.errors=[]}catch(l){this.response=null,this.error=l,this.errorMessage=((m=(d=l==null?void 0:l.response)==null?void 0:d.data)==null?void 0:m.message)??null,this.errors=((x=(_=l==null?void 0:l.response)==null?void 0:_.data)==null?void 0:x.errors)??null}}}}),Y={key:0},Z={class:"bg-theme pt-14 pb-20"},tt={class:"text-center text-white"},et={class:"text-center text-white text-xs mb-2"},st={class:"text-center"},nt={class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},ot={class:"p-3 relative",style:{top:"-74px"}},at={class:"text-xs text-center text-gray-700 mb-1"},lt={class:"text-xs text-center text-gray-500 mb-1"},it={class:"text-xs text-center text-gray-700 mb-1"},rt={class:"text-xs text-center text-gray-500 mb-1"},ct={class:"text-xs text-center text-gray-700 mb-1"},ut={class:"text-xs text-center text-gray-700 mb-1"},dt={class:"py-2"},mt={class:"text-sm text-gray-700"},pt={class:"text-xs text-gray-500"},_t={key:1,class:"pt-14 px-3 pb-20"},xt={class:"bg-white rounded-lg shadow-md flex justify-center items-center"},vt={class:"p-3"},gt={class:"text-gray-700 text-md text-center mb-3"},ft={class:"text-gray-500 text-sm text-center mb-3"},ht={class:"text-center"},kt={__name:"RouteDetailView",setup(r){Q(),q(),X();const o=u(null),p=u(null),d=u(!1),m=u(!1),_=u(null),x=u(null),l=u(null);var v=null;const D=()=>history.back(),S=async()=>{o.value=W,p.value=null,d.value=!1},z=()=>{v!==null&&v.remove(),v=L.map("map").setView([o.value.station_schedules[0].latitude,o.value.station_schedules[0].longitude],13),L.tileLayer("https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key=lGRhuk24oNhhSOVUzxcs").addTo(v);var h=L.icon({iconUrl:new URL("/yrs/assets/station-marker-61QbrTf-.png",import.meta.url).href,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});o.value.station_schedules.forEach(function(t){L.marker([t.latitude,t.longitude],{icon:h}).addTo(v).on("click",()=>{m.value=!0,_.value=t.title,x.value=t.time,l.value=t.slug})})},B=h=>{h==1&&H(()=>{z()})},E=()=>{S()};return G(()=>{S()}),(h,t)=>{const R=i("van-nav-bar"),g=i("van-grid-item"),w=i("van-icon"),T=i("van-grid"),N=i("van-step"),U=i("van-steps"),M=i("van-tab"),$=i("van-tabs"),A=i("van-empty"),F=i("van-pull-refresh"),I=i("van-button"),O=i("van-dialog");return f(),y(V,null,[n(R,{title:"Route Detail",fixed:!0,"left-text":"","left-arrow":"",onClickLeft:D}),n(F,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=c=>d.value=c),"pulling-text":"Pull to refresh","loosing-text":"Pull to refresh","loading-text":"Loading","success-text":"Successfully loaded",onRefresh:E},{default:s(()=>[o.value!=null?(f(),y("div",Y,[e("div",Z,[e("h6",tt,a(o.value.title),1),e("p",et,a(o.value.description),1),e("div",st,[e("span",nt,a(o.value.direction.text),1)])]),e("div",ot,[n(T,{border:!1,"column-num":3,class:"mb-5"},{default:s(()=>[n(g,{class:"origin-grid-item"},{default:s(()=>[t[2]||(t[2]=e("p",{class:"text-xs text-center text-theme mb-1"},"Origin",-1)),e("p",at,a(o.value.origin_station_title),1),e("p",lt,a(o.value.origin_station_time),1)]),_:1}),n(g,null,{default:s(()=>[n(w,{name:"arrow",size:"16"})]),_:1}),n(g,{class:"destination-grid-item"},{default:s(()=>[t[3]||(t[3]=e("p",{class:"text-xs text-center text-theme mb-1"},"Destination",-1)),e("p",it,a(o.value.destination_station_title),1),e("p",rt,a(o.value.destination_station_time),1)]),_:1})]),_:1}),n(T,{border:!1,"column-num":2,class:"mb-5"},{default:s(()=>[n(g,{icon:"photo-o",class:"total-stations-grid-item"},{default:s(()=>[n(w,{name:"shop-o",size:"16",class:"mb-1"}),t[4]||(t[4]=e("p",{class:"text-xs text-center text-theme mb-1"},"Total Stations",-1)),e("p",ct,a(o.value.total_stations)+" Stations ",1)]),_:1}),n(g,{icon:"photo-o",class:"traveling-time-grid-item"},{default:s(()=>[n(w,{name:"underway-o",size:"16"}),t[5]||(t[5]=e("p",{class:"text-xs text-center text-theme mb-1"},"Traveling Time",-1)),e("p",ut,a(o.value.traveling_minutes)+" minutes ",1)]),_:1})]),_:1}),n($,{onChange:B},{default:s(()=>[n(M,null,{title:s(()=>t[6]||(t[6]=[k("Schedule")])),default:s(()=>[e("div",dt,[n(U,{direction:"vertical","active-icon":"location","inactive-icon":"location","finish-icon":"location",class:"rounded-lg mb-5"},{default:s(()=>[(f(!0),y(V,null,J(o.value.station_schedules,c=>(f(),K(N,{key:c.slug},{"active-icon":s(()=>t[7]||(t[7]=[e("img",{src:b,alt:"",class:"w-6 h-6"},null,-1)])),"inactive-icon":s(()=>t[8]||(t[8]=[e("img",{src:b,alt:"",class:"w-6 h-6"},null,-1)])),"finish-icon":s(()=>t[9]||(t[9]=[e("img",{src:b,alt:"",class:"w-6 h-6"},null,-1)])),default:s(()=>[e("p",mt,a(c.title),1),e("p",pt,a(c.time),1)]),_:2},1024))),128))]),_:1})])]),_:1}),n(M,null,{title:s(()=>t[10]||(t[10]=[k("Map")])),default:s(()=>[t[11]||(t[11]=e("div",{class:"py-2"},[e("div",{id:"map",class:"h-96"})],-1))]),_:1})]),_:1})])])):C("",!0),p.value!=null?(f(),y("div",_t,[e("div",xt,[e("div",null,[n(A,{image:"error",description:p.value,class:"text-center"},null,8,["description"])])])])):C("",!0)]),_:1},8,["modelValue"]),n(O,{show:m.value,"onUpdate:show":t[1]||(t[1]=c=>m.value=c),"show-confirm-button":!1,"show-cancel-button":!1,"close-on-click-overlay":!0},{default:s(()=>[e("div",vt,[t[13]||(t[13]=e("img",{src:b,class:"w-16 h-16 mx-auto mb-4"},null,-1)),e("p",gt,a(_.value),1),e("p",ft,a(x.value),1),e("div",ht,[n(I,{icon:"info-o",type:"primary",size:"small",plain:"",color:"#1CBC9B",to:`/station/${l.value}`},{default:s(()=>t[12]||(t[12]=[k("Station Information")])),_:1},8,["to"])])])]),_:1},8,["show"])],64)}}};export{kt as default};
