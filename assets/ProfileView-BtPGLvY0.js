import{v as b,x as N,y as O,z as U,b as n,A as I,B as j,d as M,a as P,C as F,r as h,o as W,c as f,f as o,e as i,F as z,g as p,h as _,j as H,i as B,m as x,t as y,u as G,k as Q}from"./index-CqF_l6GU.js";import{a as q}from"./function-call-CJ1tGEqk.js";let w;const J={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let K=b({},J);function X(){({instance:w}=O({setup(){const{state:l,toggle:r}=U();return()=>n(j,I(l,{"onUpdate:show":r}),null)}}))}function Y(e){return N?new Promise((l,r)=>{w||X(),w.open(b({},K,e,{callback:a=>{(a==="confirm"?l:r)(a)}}))}):Promise.resolve(void 0)}const Z=e=>Y(b({showCancelButton:!0},e)),S="/yrs/assets/user-wL0iQM95.png",$=M("profileStore",{state:()=>({response:null,error:null,errorMessage:null,errors:[]}),getters:{getResponse:e=>e.response,getError:e=>e.error,getErrorMessage:e=>e.errorMessage,getErrors:e=>e.errors},actions:{async get(){var e,l,r,a;try{let s=await P.get("user-portal/profile");this.response=s.data??null,this.error=null,this.errorMessage=null,this.errors=[]}catch(s){this.response=null,this.error=s,this.errorMessage=((l=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:l.message)??null,this.errors=((a=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:a.errors)??null}}}}),ee=M("logoutStore",{state:()=>({response:null,error:null,errorMessage:null,errors:[]}),getters:{getResponse:e=>e.response,getError:e=>e.error,getErrorMessage:e=>e.errorMessage,getErrors:e=>e.errors},actions:{async store(){var e,l,r,a;try{let s=await P.post("user-portal/logout");this.response=s.data??null,this.error=null,this.errorMessage=null,this.errors=[]}catch(s){this.response=null,this.error=s,this.errorMessage=((l=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:l.message)??null,this.errors=((a=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:a.errors)??null}}}}),te={key:0,class:"bg-theme rounded-b-lg shadow-sm p-3 flex justify-start items-center"},se={class:"ml-3"},oe={key:1,class:"bg-theme rounded-b-lg shadow-sm p-3 flex justify-start items-center"},ne={class:"ml-3"},le={class:"text-sm text-white"},re={class:"text-sm text-white"},ae={class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},ie={class:"p-3"},ue={class:"flex items-center"},ce={class:"flex items-center"},de={class:"flex items-center"},ge={class:"flex items-center"},pe={class:"flex items-center"},me={class:"flex items-center"},fe={key:0},he={__name:"ProfileView",setup(e){const l=G();Q();const r=F(),a=$(),s=ee(),u=h(null),T=r.getIsAuthenticated,v=h(!1),m=h(!1),k=async()=>{var c;await a.get(),u.value=(c=a.getResponse)==null?void 0:c.data,v.value=!1},L=async()=>{m.value=!0,Z({title:"Logout",message:"Are you sure, you want to logout?",cancelButtonText:"Cancel",confirmButtonText:"Confirm",confirmButtonColor:"#1CBC9B"}).then(async()=>{var c;await s.store(),s.getErrorMessage==null&&(ls.remove("__access-token"),q((c=s.getResponse)==null?void 0:c.message),l.push("/")),m.value=!1}).catch(()=>{m.value=!1})},E=()=>{k()};return W(()=>{k()}),(c,t)=>{const R=p("van-nav-bar"),C=p("van-button"),d=p("van-icon"),g=p("van-cell"),V=p("van-cell-group"),A=p("van-pull-refresh");return _(),f(z,null,[n(R,{title:"Profile",fixed:!0}),t[11]||(t[11]=o("div",{class:"pt-[46px]"},null,-1)),n(A,{modelValue:v.value,"onUpdate:modelValue":t[0]||(t[0]=D=>v.value=D),"pulling-text":"Pull to refresh","loosing-text":"Pull to refresh","loading-text":"Loading","success-text":"Successfully loaded",onRefresh:E},{default:i(()=>[H(T)?x("",!0):(_(),f("div",te,[t[2]||(t[2]=o("img",{src:S,alt:"",class:"w-14 h-14 p-1 bg-gray-100 rounded-lg"},null,-1)),o("div",se,[n(C,{icon:"contact-o",type:"default",plain:"",size:"small",class:"rounded-lg border-none",to:"/login"},{default:i(()=>t[1]||(t[1]=[B("Create Account or Login")])),_:1})])])),u.value!=null?(_(),f("div",oe,[t[3]||(t[3]=o("img",{src:S,alt:"",class:"w-14 h-14 p-1 bg-gray-100 rounded-lg"},null,-1)),o("div",ne,[o("h6",le,y(u.value.name),1),o("p",re,y(u.value.email),1),o("span",ae,y(u.value.wallet_balance),1)])])):x("",!0),o("div",ie,[n(V,{inset:"",class:"mb-3 mx-0"},{default:i(()=>[n(g,{"is-link":"",to:"/change-password"},{title:i(()=>[o("div",ue,[n(d,{name:"shield-o",class:"text-lg mr-1"}),t[4]||(t[4]=o("span",null,"Change Password",-1))])]),_:1}),n(g,{"is-link":"",to:"/buy-ticket"},{title:i(()=>[o("div",ce,[n(d,{name:"coupon-o",class:"text-lg mr-1"}),t[5]||(t[5]=o("span",null,"Buy Ticket",-1))])]),_:1}),n(g,{"is-link":"",to:"/ticket"},{title:i(()=>[o("div",de,[n(d,{name:"orders-o",class:"text-lg mr-1"}),t[6]||(t[6]=o("span",null,"Ticket",-1))])]),_:1}),n(g,{"is-link":"",to:"/top-up"},{title:i(()=>[o("div",ge,[n(d,{name:"photo-o",class:"text-lg mr-1"}),t[7]||(t[7]=o("span",null,"Top Up",-1))])]),_:1}),n(g,{"is-link":"",to:"/top-up-history"},{title:i(()=>[o("div",pe,[n(d,{name:"list-switch",class:"text-lg mr-1"}),t[8]||(t[8]=o("span",null,"Top Up History",-1))])]),_:1}),n(g,{"is-link":"",to:"/wallet-transaction"},{title:i(()=>[o("div",me,[n(d,{name:"paid",class:"text-lg mr-1"}),t[9]||(t[9]=o("span",null,"Wallet Transaction",-1))])]),_:1})]),_:1}),u.value!=null?(_(),f("div",fe,[n(C,{type:"default",plain:"",block:"",class:"rounded-lg border-none","loading-text":"Loading...",loading:m.value,onClick:L},{default:i(()=>t[10]||(t[10]=[B("Logout")])),_:1},8,["loading"])])):x("",!0)])]),_:1},8,["modelValue"])],64)}}};export{he as default};
