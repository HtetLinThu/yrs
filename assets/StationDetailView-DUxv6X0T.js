import{d as z,a as A,r as m,o as U,c as g,b as o,e as r,F as f,n as $,g as i,h as u,f as n,t as y,i as w,l as S,m as M,u as F,k as P,p as V}from"./index-CqF_l6GU.js";const j=z("stationDetailStore",{state:()=>({response:null,error:null,errorMessage:null,errors:[]}),getters:{getResponse:l=>l.response,getError:l=>l.error,getErrorMessage:l=>l.errorMessage,getErrors:l=>l.errors},actions:{async get(l){var v,c,e,d;try{let t=await A.get(`station/${l}`);this.response=t.data??null,this.error=null,this.errorMessage=null,this.errors=[]}catch(t){this.response=null,this.error=t,this.errorMessage=((c=(v=t==null?void 0:t.response)==null?void 0:v.data)==null?void 0:c.message)??null,this.errors=((d=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:d.errors)??null}}}}),G={key:0},I={class:"bg-theme pt-14 pb-20"},O={class:"text-center text-white"},q={class:"text-center text-white text-xs mb2"},H={class:"p-3 relative",style:{top:"-74px"}},J={class:"py-2"},K={class:"py-2"},Q={key:1,class:"pt-14 px-3 pb-20"},W={class:"bg-white rounded-lg shadow-md flex justify-center items-center"},Y={__name:"StationDetailView",setup(l){F();const v=P(),c=j(),e=m(null),d=m(null),t=m(!1);var _=null;const D=()=>history.back(),h=async()=>{var p;await c.get(v.params.slug),e.value=(p=c.getResponse)==null?void 0:p.data,d.value=c.getErrorMessage,t.value=!1,e!=null&&$(()=>{R()})},R=()=>{_!==null&&_.remove(),_=L.map("map").setView([e.value.latitude,e.value.longitude],15),L.tileLayer("https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key=lGRhuk24oNhhSOVUzxcs").addTo(_);var p=L.icon({iconUrl:p,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});L.marker([e.value.latitude,e.value.longitude],{icon:p}).addTo(_)},C=()=>{h()};return U(()=>{h()}),(p,a)=>{const E=i("van-nav-bar"),x=i("van-cell"),k=i("van-cell-group"),b=i("van-tab"),N=i("van-tabs"),B=i("van-empty"),T=i("van-pull-refresh");return u(),g(f,null,[o(E,{title:"Station Detail",fixed:!0,"left-text":"","left-arrow":"",onClickLeft:D}),o(T,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value=s),"pulling-text":"Pull to refresh","loosing-text":"Pull to refresh","loading-text":"Loading","success-text":"Successfully loaded",onRefresh:C},{default:r(()=>[e.value!=null?(u(),g("div",G,[n("div",I,[n("h6",O,y(e.value.title),1),n("p",q,y(e.value.description),1)]),n("div",H,[a[3]||(a[3]=n("div",{id:"map",class:"h-40 mb-3 rounded-lg shadow-md"},null,-1)),o(N,null,{default:r(()=>[o(b,null,{title:r(()=>a[1]||(a[1]=[w("Clockwise")])),default:r(()=>[n("div",J,[o(k,{inset:"",class:"mb-3 mx-0"},{default:r(()=>[(u(!0),g(f,null,S(e.value.clockwise_route_schedules,s=>(u(),V(x,{key:s.slug,title:s.title,label:s.time,"is-link":"",to:`/route/${s.slug}?origin_station_slug=&destination_station_slug=`},null,8,["title","label","to"]))),128))]),_:1})])]),_:1}),o(b,null,{title:r(()=>a[2]||(a[2]=[w("Anticlockwise")])),default:r(()=>[n("div",K,[o(k,{inset:"",class:"mb-3 mx-0"},{default:r(()=>[(u(!0),g(f,null,S(e.value.anticlockwise_route_schedules,s=>(u(),V(x,{key:s.slug,title:s.title,label:s.time,"is-link":"",to:`/route/${s.slug}?origin_station_slug=&destination_station_slug=`},null,8,["title","label","to"]))),128))]),_:1})])]),_:1})]),_:1})])])):M("",!0),d.value!=null?(u(),g("div",Q,[n("div",W,[n("div",null,[o(B,{image:"error",description:d.value,class:"text-center"},null,8,["description"])])])])):M("",!0)]),_:1},8,["modelValue"])],64)}}};export{Y as default};
