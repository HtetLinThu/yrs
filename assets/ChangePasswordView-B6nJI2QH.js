import{d as E,a as x,r as u,c as C,b as t,f as n,e as _,F as V,g as p,h as P,i as S,u as k}from"./index-CqF_l6GU.js";import{a as B}from"./function-call-CJ1tGEqk.js";const M="/yrs/assets/change-password-s3ZsOd40.png",N=E("changePasswordStore",{state:()=>({response:null,error:null,errorMessage:null,errors:[]}),getters:{getResponse:r=>r.response,getError:r=>r.error,getErrorMessage:r=>r.errorMessage,getErrors:r=>r.errors},actions:{async store(r,i){var o,l,d,a;try{let s=await x.post("user-portal/change-password",{old_password:r,new_password:i});this.response=s.data??null,this.error=null,this.errorMessage=null,this.errors=[]}catch(s){this.response=null,this.error=s,this.errorMessage=((l=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:l.message)??null,this.errors=((a=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:a.errors)??null}}}}),j={class:"p-3"},L={class:"bg-white rounded-lg"},R={class:"my-4"},T={__name:"ChangePasswordView",setup(r){const i=k(),o=N(),l=u(""),d=u(""),a=u({old_password:"",new_password:""}),s=u(!1),m=()=>history.back(),v=async w=>{var e;s.value=!0,a.value={old_password:"",new_password:""},await o.store(w.old_password,w.new_password),o.getErrorMessage?o.getErrors&&(a.value={old_password:o.getErrors.old_password?o.getErrors.old_password.join(", "):"",new_password:o.getErrors.new_password?o.getErrors.new_password.join(", "):""}):(B((e=o.getResponse)==null?void 0:e.message),i.push("profile")),s.value=!1};return(w,e)=>{const f=p("van-nav-bar"),g=p("van-field"),h=p("van-cell-group"),b=p("van-button"),y=p("van-form");return P(),C(V,null,[t(f,{title:"Change Password",fixed:!0,"left-text":"","left-arrow":"",onClickLeft:m}),e[4]||(e[4]=n("div",{class:"pt-[46px]"},null,-1)),n("div",j,[t(y,{onSubmit:v},{default:_(()=>[n("div",L,[e[2]||(e[2]=n("div",{class:"flex justify-center items-center py-3"},[n("img",{src:M,alt:"",class:"w-5/12"})],-1)),t(h,{inset:"",class:"mb-3 mx-0"},{default:_(()=>[t(g,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=c=>l.value=c),type:"password",name:"old_password",label:"Old Password",placeholder:"Enter your old password","error-message":a.value.old_password},null,8,["modelValue","error-message"]),t(g,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=c=>d.value=c),type:"password",name:"new_password",label:"New Password",placeholder:"Enter your new password","error-message":a.value.new_password},null,8,["modelValue","error-message"])]),_:1})]),n("div",R,[t(b,{round:"",block:"",type:"primary","native-type":"submit",color:"#1CBC9B",loading:s.value},{default:_(()=>e[3]||(e[3]=[S(" Confirm ")])),_:1},8,["loading"])])]),_:1})])],64)}}};export{T as default};
